X
M
f(X,M) = (M^{T} \cdot X)^2 = M^{T} \cdot X \cdot X^{T} \cdot M
f(X,M) = g(X) \cdot h(M)
g(X)
h(M
g(A) = M \cdot A\\h(A) = X \cdot A
n>1
f(u,v)=\langle u,v\rangle^2 = g(u)^T h(v)
u,v
u
\det\left(g'(u)^T h'(u)\right)=\det(2uu^T+2I)=4\not=0
f
u
2\langle u,v\rangle v = g'(u)^T h(v)
n>1
v\perp u
g'(u)^T h(v)=0
\det\,g'(u)=0
\langle u,v\rangle^2
g(u)^T h(v)
n>1
 \left(\frac{\partial^2 f}{\partial u_i\partial v_j}\right)_{i,j\in\{1,\ldots,n\}} =\ 2vu^T + 2\operatorname{diag}(\langle u,v\rangle)\ =\ g'(u)^T h'(v). 
