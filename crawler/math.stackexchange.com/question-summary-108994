3^5 - 3 \cdot 2^5 + 3 \cdot 1^5 = 150
abccc
abbbc
aaabc
3 \cdot \frac{5!}{3!}=60
3
5
\binom42=6
3\cdot 5\cdot 6=90
a_n=3a_{n-1}+3(2^{n-1}-2)\tag{1}\;.
a_n=3a_{n-1}+3(2^{n-1}-2)+\frac92[n=0]+3[n=1]\tag{2}\;.
x^n
n
f(x)
\begin{align*}f(x)=\sum_na_nx^n&=3\sum_n\left(a_{n-1}+2^{n-1}-2+\frac32[n=0]+[n=1]\right)x^n\\ &=3\left(\sum_na_{n-1}x^n+\sum_n2^{n-1}x^n-2\sum_nx^n+\frac32+x\right)\\ &=3\left(x\sum_na_{n-1}x^{n-1}+\frac12\sum_n(2x)^n-\frac2{1-x}+\frac32+x\right)\\ &=3\left(x\sum_na_nx_n+\frac{1/2}{1-2x}-\frac2{1-x}+\frac32+x\right)\\ &=3xf(x)+\frac32\left(\frac{7x-3}{(1-x)(1-2x)}+2x+3\right)\\ &=3xf(x)+\frac{6x^3}{(1-x)(1-2x)}\;, \end{align*}
(1-3x)f(x)=\frac{6x^3}{(1-x)(1-2x)}\;,
\begin{align*} f(x)&=\frac{6x^3}{(1-x)(1-2x)(1-3x)}\\ &=x^3\left(\frac3{1-x}-\frac{24}{1-2x}+\frac{27}{1-3x}\right)\\ &=3x^3\left(\sum_nx^n-8\sum_n2^nx^n+9\sum_n3^nx^n\right)\\ &=\sum_n\left(3-3\cdot 2^{n+3}+3^{n+3}\right)x^{n+3}\\ &=\sum_n\left(3-3\cdot 2^n+3^n\right)x^n\;. \end{align*}
a_n=3^n-3\cdot 2^n+3
