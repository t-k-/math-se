M
n \times n
n \times 1
 \frac{\partial z^tM}{\partial z} = M 
 \frac{\partial z^tMz}{\partial z} = (M + M^t) z 
 \frac{\partial z^tMz}{\partial z} = \frac{\partial z^tM}{\partial z} \cdot z + z^tM\cdot \frac{\partial z}{\partial z} 
 M z + z^tM \cdot 1 
f(z) = z^T M z
f(z+\delta) = (z+\delta)^T M (z+ \delta) = z^T M z + z^T (M+M^T) \delta + \delta^T M \delta
\frac{\partial f(z)} {\partial z}(\delta) = z^T (M+M^T) \delta
\frac{\partial f(z)} {\partial z} = z^T (M+M^T)
