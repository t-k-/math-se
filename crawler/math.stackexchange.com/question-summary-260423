\int \tan^{-1} \left(1 + x + x^{2}\right) dx 
\left(x^2+x+1 \right)^2+1 = \left(x^2+1 \right) \left(x^2+2x+2 \right)
\dfrac{x(2x+1)}{(x^2+x+1)^2+1} = \dfrac{x}{x^2+1} - \dfrac{x}{x^2 + 2x+2}
\int \dfrac{x(2x+1)}{(x^2+x+1)^2+1} dx = \int \dfrac{x dx}{x^2+1} - \int \dfrac{x dx}{x^2 + 2x+2}
\int \dfrac{x dx}{x^2+1} = \dfrac12 \log \left(1+x^2 \right)
\int \dfrac{x dx}{x^2 + 2x+2} = \int \dfrac{\left(x + 1 \right) dx}{\left( x+1 \right)^2+1} - \int \dfrac{dx}{\left( x+1 \right)^2+1} = \dfrac12 \log \left((x+1)^2+1\right) - \arctan(x+1)
x \arctan \left( 1+x+x^2 \right) - \dfrac12 \log \left( 1+x^2\right) + \dfrac12 \log \left((x+1)^2+1\right) - \arctan(x+1)
x \arctan \left( 1+x+x^2 \right) - \arctan(x+1) + \dfrac12 \log \left(\dfrac{(x+1)^2+1}{x^2+1}\right) + \text{ constant}
