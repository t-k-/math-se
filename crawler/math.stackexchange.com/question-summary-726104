\mathbf{v}=(\mathbf{u}_{n-1}-\mathbf{u}_{n})\times(\mathbf{u}_{n}-\mathbf{u}_{n+1})
{e}_{n}=\mathbf{v}\cdot\mathbf{v}=((\mathbf{u}_{n-1}-\mathbf{u}_{n})\times(\mathbf{u}_{n}-\mathbf{u}_{n+1}))^{2}
\mathbf{u}_n=(u_{n,x},u_{n,y},u_{n,z})
e_n
u_{n,x}
\frac{\partial e_{n}}{\partial u_{n,x}}=\frac{\partial(\mathbf{v}\cdot\mathbf{v})}{\partial u_{n,x}}
=\left(\frac{\partial\mathbf{v}}{\partial u_{n,x}}\cdot\mathbf{v}+\frac{\partial\mathbf{v}}{\partial u_{n,x}}\cdot\mathbf{v}\right)
=2\left(\frac{\partial\mathbf{v}}{\partial u_{n,x}}\cdot\mathbf{v}\right)
=2\cdot\mathbf{v}\cdot\left(\frac{\partial(u_{n-1}-u_{n})}{\partial u_{n,x}}\times(u_{n}-u_{n+1})+\frac{\partial(u_{n}-u_{n+1})}{\partial u_{n,x}}\times(u_{n-1}-u_{n})\right)
=2\cdot\mathbf{v}\cdot\left(\begin{pmatrix}-1\\ 0\\ 0 \end{pmatrix}\times(u_{n,x}-u_{n+1,x})+\begin{pmatrix}1\\ 0\\ 0 \end{pmatrix}\times(u_{n-1,x}-u_{n,x})\right)
\textbf{a}\times\textbf{b}=-\textbf{b}\times\textbf{a}
(-\textbf{a})\times\textbf{b}=-\textbf{a}\times\textbf{b}
\textbf{a}\times(\textbf{b}+\textbf{c})=\textbf{a}\times\textbf{b}+\textbf{a}\times\textbf{c}
 \frac{\partial e_n}{\partial u_{n,x}}=\frac{\partial (\mathbf{v}\cdot \mathbf{v})}{\partial u_{n,x}}=\left(\frac{\partial \mathbf{v}}{\partial u_{n,x}}\right)\cdot \mathbf{v}+\mathbf{v}\cdot\left(\frac{\partial \mathbf{v}}{\partial u_{n,x}}\right)=2\mathbf{v}\cdot\left(\frac{\partial \mathbf{v}}{\partial u_{n,x}}\right) \tag{1} 
(1)
(\textbf{a}\times\textbf{b})\cdot(\textbf{c}\times\textbf{d})=(\textbf{a}\cdot\textbf{c})(\textbf{b}\cdot\textbf{d})-(\textbf{a}\cdot\textbf{d})(\textbf{b}\cdot\textbf{c})
 \frac{\partial e_n}{\partial u_{n,x}}=2\{(u_{n-1,x}-u_{n,x})[(\textbf{u}_{n}-\textbf{u}_{n+1})\cdot(\textbf{u}_{n+1}-\textbf{u}_{n-1})]+(u_{n+1,x}-u_{n,x})[(\textbf{u}_{n-1}-\textbf{u}_{n})\cdot(\textbf{u}_{n+1}-\textbf{u}_{n-1})]\}. 
\{\textbf{u}_n\}
\textbf{u}_n\cdot \textbf{u}_m=\delta_{n,m}
 \frac{\partial e_n}{\partial u_{n,x}}=2(2u_{n,x}-u_{n-1,x}-u_{n+1,x}). 
{\partial\psi\over\partial x_1}
{\partial v\over\partial x_1}
(1)
v:=(a-x)\times(x-b),\quad \psi:=v\cdot v\ ,
{\partial \psi\over\partial x_1}=2v\cdot{\partial v\over\partial x_1}\ .\tag{1}
{\partial\over\partial x_1}(a-x)=(-1,0,0)^T,\quad{\partial\over\partial x_1}(x-b)=(1,0,0)^T\ ,
{\partial v\over\partial x_1}=(-1,0,0)^T\times(x-b)+(a-x)\times(1,0,0)^T=(1,0,0)^T\times(b-a)=(0,a_3-b_3,b_2-a_2)^T\ .
