r
n
t_n
n
E(t_n)
E[t_n | r_n=r] = 1 + E[t_r]
r_n=0
r_n = n
E[E[x|y]] = E[x]
\displaystyle E[t_n] = \sum_{r=0}^n (1 + E[t_r]) \; p(n,r) 
p(n,r) = Prob(r_n = r)
r=n
\displaystyle E[t_n] = \frac{1}{1-p(n,n)} \left( p(n,n) + \sum_{r=0}^{n-1} (1 + E[t_r]) \; p(n,r) \right) 
E[t_0] = E[t_1] = 0
p(n,r)
n
r
\displaystyle  p(n,r) = \frac{(n + 1 -r) \; (r^2 - 3r + 3) \; (r-2)!}{n!}
r>1
p(n,0) = 1/n!
p(n,1)=0
p(n,r)
r \ge 2
n
r
(n1;r;n2)
n1
n2
r
r! - 2(r - 1)! + (r-2)! = (r^2 - 3 r + 3) (r-2)!
r
(n1;n2)
n-r
n - r +1
r
\displaystyle  p(n,r) = \frac{(n + 1 -r) \; (r^2 - 3r + 3) \; (r-2)!}{n!}
\displaystyle E(t_n) \approx \frac{n(n-1)}{4} \approx \frac{n^2}{4}
