n=x^2+y^2
n=2^{2k}m
n=2^{2k+1}m
2^{k}
2^a
2
x
y
2^{2k}
2^{2k+1}
2
x^2+y^2
a=k
2^a
2
x
y
x=2^a s
y=2^at
s
t
s
t
x^2+y^2=2^{2a}(s^2+t^2)
s^2+t^2
2^{2a}
2
x^2+y^2
a=k
s
t
s^2\equiv 1\pmod{4}
t^2\equiv 1\pmod{4}
s^2+t^2\equiv 2\pmod{4}
2
s^2+t^2
2^1
2
x^2+y^2
2^{2a+1}
a=k
(x,y)=2^rs
s
\displaystyle\frac xX=\frac yY=2^rs\implies (X,Y)=1
\displaystyle\implies x^2+y^2=2^{2r}s^2(X^2+Y^2)
(X,Y)=1,
1:
(2c+1)^2=4c^2+4c+1\equiv1\pmod4, X^2+Y^2=2\pmod4
2,
4
2:
X,Y
\implies X^2+y^2\equiv0+1\pmod4
