\varphi:A\to B
X=\operatorname{Spec}(A)
Y=\operatorname{Spec}(B)
\varphi
(f,f^*):(Y,\mathcal{O}_Y)\to(X,\mathcal{O}_X).
f
f^*
\varphi
\mathfrak{p}\in Y=\operatorname{Spec}(B)
\varphi_{\mathfrak{p}}:A_{\varphi^{-1}(\mathfrak{p})}\to B_{\mathfrak{p}}
U\subseteq X
f^*:\mathcal{O}_X(U)\to\mathcal{O}_Y(f^{-1}(U))
\mathcal{O}_X(U)
U\to\coprod_{\mathfrak{q}\in U}A_{\mathfrak{q}}
\mathcal{O}_Y(f^{-1}(U))
f^{-1}(U)\to\coprod_{\mathfrak{p}\in f^{-1}(U)}B_\mathfrak{p}
s\in\mathcal{O}_X(U)
f
\varphi_\mathfrak{p}
s
\varphi_\mathfrak{p}
\coprod_{\mathfrak{q}\in U}A_\mathfrak{q}=\coprod_{\mathfrak{p}\in f^{-1}(U)}A_{\varphi^{-1}(\mathfrak{p})}=\coprod_{\varphi^{-1}(\mathfrak{p})\in U}A_{\varphi^{-1}(\mathfrak{p})}
U
\varphi^{-1}(\mathfrak{p})
f^*:\mathcal{O}_X(U)\to\mathcal{O}_Y(f^{-1}(U))
s: U\to\coprod_{\mathfrak{q}\in U}A_{\mathfrak{q}}
s(\mathfrak q) \in A_\mathfrak{q}
\mathfrak q \in U
f^*(s): f^{-1}(U) \to \coprod_{\mathfrak p \in f^{-1}(U)} B_\mathfrak p
\mathfrak p \in f^{-1}(U)
B_\mathfrak p
\mathfrak p \in f^{-1}(U)
f(\mathfrak p) \in U
s
f(\mathfrak p)
(s \circ f)(\mathfrak p) \in A_{f(\mathfrak p)}
\varphi: A \to B
\varphi_{\mathfrak p}: A_{f(\mathfrak p)} \to B_\mathfrak p
(s \circ f)(\mathfrak p)
(\varphi_\mathfrak p \circ s \circ f)(\mathfrak p) \in B_\mathfrak p
f^*
f^*: \mathcal{O}_X(U)\to\mathcal{O}_Y(f^{-1}(U))\\ (s(\mathfrak q))_{\mathfrak q \in U} \in \prod_{\mathfrak q \in U} A_\mathfrak q \mapsto ((\varphi_\mathfrak p \circ s \circ f)(\mathfrak p))_{\mathfrak p \in f^{-1}(U)} \in \prod_{\mathfrak p \in f^{-1}(U)} B_\mathfrak p
