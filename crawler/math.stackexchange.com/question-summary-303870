\sum \limits_{i=1}^k n_i = n
n_i \ge 1
\sum \limits_{i=1}^k n_i^2 \le n^2 -(k-1)(2n-k) 
 \left(\sum \limits_{i=1}^k (n_i-1)\right)^2 =  \sum \limits_{i=1}^k (n_i^2-2n_i)+k+ \text{ non-negative cross terms } 
\begin{align*} \left(\sum_{i=1}^ka_i\right)^2&=(a_1+\ldots+a_k)^2\\\\ &=a_1(a_1+\ldots+a_k)+a_2(a_1+\ldots+a_k)+\ldots+a_k(a_1+\ldots+a_k)\\\\ &=\sum_{j=1}^k\left(a_j\sum_{i=1}^ka_i\right)\\\\ &=\sum_{j=1}^k\sum_{i=1}^ka_ja_i\;. \end{align*}
\langle j,i\rangle
a_ja_i
k
a_1^2,\dots,a_k^2
j\ne i
a_ja_i
a_ia_j
\left(\sum_{i=1}^ka_i\right)^2=\sum_{i=1}^ka_i^2+2\sum_{1\le i<j\le k}a_ia_j\;.\tag{1}
a_i=n_i-1
a_i^2=n_i^2-2n_i+1
\sum_{i=1}^ka_i^2=\sum_{i=1}^k\left(n_i^2-2n_i+1\right)=\sum_{i=1}^k\left(n_i^2-2n_i\right)+\sum_{i=1}^k1=\sum_{i=1}^k\left(n_i^2-2n_i\right)+k\;.
(1)
a_ia_j
(n_i-1)(n_j-1)
n_i\ge 1
