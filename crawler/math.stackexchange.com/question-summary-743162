a+b+c+d=18
(1,1,1,15)
(15,1,1,1)
4
18
4
18
1
4
4
p(n)
n
n
k
p_k(n)
9 = 4+3+2
 \begin{align} \Box \Box \Box \Box \\ \Box \Box \Box \\ \Box \Box \end{align} 
k
k
1
p_k(n) = \sum\limits_{i=1}^k p_i(n-k)
p_3(9) = \sum\limits_{i=1}^3 p_i(6)
 \begin{align} \Box \Box \Box \blacksquare \\ \Box \Box \blacksquare \\ \Box \blacksquare \end{align} 
p_k(n) = \sum\limits_{r=1}^{{\lfloor}n/k{\rfloor}} \sum\limits_{i=1}^{k-1} p_i(n-rk)
p_3(9) = \sum\limits_{i=1}^2 \Big( p_i(6) + p_i(3) + p_i(0) \Big)
p_k(0) = 1
p_1(n) = 1
p_n(n) = 1
p_k(n) = 0
k > n
p_2(n) = \lfloor\frac{n}{2}\rfloor
 \begin{align} \sum\limits_{i=1}^2 p_2(6): \Box \Box \Box \blacksquare \\ \Box \Box \Box \blacksquare \\ \blacksquare \\ \\ \sum\limits_{i=1}^2 p_2(3): \Box \Box \blacksquare \blacksquare \\ \Box \blacksquare \blacksquare \\ \blacksquare \blacksquare \\ \\ \sum\limits_{i=1}^2 p_2(0): \blacksquare \blacksquare \blacksquare \\ \blacksquare \blacksquare \blacksquare \\ \blacksquare \blacksquare \blacksquare \end{align} 
n
k
n
k
k
k
p_4(18)
 \begin{eqnarray*} p_4(18) &=& \sum\limits_{i=1}^3 \Big( p_i(14) + p_i(10) + p_i(6) + p_i(2) \Big) \\ \sum\limits_{i=1}^3 p_i(2) &=& 2 \\ \sum\limits_{i=1}^3 p_i(6) &=& p_1(6) + p_2(6) + p_3(6) = 1 + 3 + 3 = 7 \\ \sum\limits_{i=1}^3 p_i(10) &=& p_1(10) + p_2(10) + p_3(10) \\ &=& 1 + 5 + \sum\limits_{i=1}^2 \Big( p_i(7) + p_i(4) + p_i(1) \Big) = 6 + 4 + 3 + 1 = 14 \\ \sum\limits_{i=1}^3 p_i(14) &=& p_1(14) + p_2(14) + p_3(14) \\ &=& 1 + 7 + \sum\limits_{i=1}^2 \Big( p_2(11) + p_2(8) + p_2(5) + p_2(2) \Big) = 8 + 6 + 5 + 3 + 2 = 24 \\ p_4(18) &=& 24 + 14 + 7 + 2 = \boxed{47} \end{eqnarray*} 
P(n, k, m)
n
k
m
P(n,k,m) = \sum_{i=m}^n P(n-i, k-1, i).
18 = 9+6+2+1
18 = 6+2+9+1
18
4
i
i
18
18-i
18-i
i
P(18-i, 3, i)
i
m
n
n=0
n<m
0<k
\begin{align} P(n, 0, m) & = \begin{cases}1, \text{ if $n=0$}\\ 0,\text{ otherwise} \end{cases}\\ P(n, k, m) & = 0 \text{ whenever $n<m$ and $0<k$}  \end{align}
P(18,4,1) 
47
A=\{(a,b,c,d)\mid 0\le a,b,c,d\le n,\quad a+b+c+d=n\}
A_2=\{(a,a,b,c)\mid 0\le a,b,c\le n,\quad  a+a+b+c=n\}
A_3=\{(a,a,a,b)\mid 0\le a,b\le n,\quad  a+a+a+b=n\}
A_{22}=\{(a,a,b,b)\mid 0\le a,b\le n,\quad  a+a+b+b=n\}
A_4=\{(a,a,a,a)\mid 0\le a\le n,\quad  a+a+a+a=n\}
|A|={n+3\choose 3}
|A_2|=\left\lfloor\frac{(n+2)^2}{4}\right\rfloor
|A_3|=\left\lfloor\frac{n}{3}\right\rfloor+1
|A_{22}|=\left(2\left\lfloor\frac{n}{2}\right\rfloor+1-n\right)\left(\frac{n}{2}+1\right)
|A_4|=\left\lfloor\frac{n}{4}\right\rfloor-\left\lfloor\frac{n-1}{4}\right\rfloor
a+b+c+d=n
S_n
 \displaystyle S_n=\dfrac{|A|+6|A_2|+3|A_{22}|+8|A_3|+6|A_4|}{4!}
n=18
|A|={21\choose 3}=1330;\quad |A_2|=\left\lfloor\frac{20^2}{4}\right\rfloor=100;\quad |A_3|=\left\lfloor\frac{18}{3}\right\rfloor+1=7;
|A_{22}|=\left(2\left\lfloor\frac{18}{2}\right\rfloor+1-18\right)\left(\frac{18}{2}+1\right)=10;\quad |A_4|=\left\lfloor\frac{18}{4}\right\rfloor -\left\lfloor\frac{17}{4}\right\rfloor=0
S_{18}=\dfrac{1330+6.100+3.10+8.7+6.0}{4!}=84
