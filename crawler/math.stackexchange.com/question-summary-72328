p
((x))
x
p
a \in \{1, 2, ..., p-1\}
f(a) = \sum\limits_{g=1}^{p-1} g \times ((a g))
f(a)=f(b)
a=b
a=b^{-1} \bmod p
f(a) \bmod p^2
f(a) = \frac{1}{2} \sum_{g=1}^{p-1} [ (g + a(g))^2 - g^2 - a(g)^2 ] = \frac{1}{2} \sum_g (g + a(g))^2 - \sum_g g^2
g + a(g) = c(g)
c(g) + p
a \neq p-1
c = a+1 (
p)
g + a(g) = p
a=p-1
a=p-1
f(a) = \frac{p^2(p-1)}{2} - \frac{(p-1)p(2p-1)}{6} = \frac{(p-1)p(p+1)}{6}
a<p-1
f(a) = \frac{1}{2} \sum_g c(g)^2 + \frac{1}{2} \sum_{c(g)<g} (2c(g) p + p^2) - \frac{(p-1)p(2p-1)}{6} 
 = \frac{1}{2} \sum_{c(g)<g} (2c(g) p + p^2) - \frac{(p-1)p(2p-1)}{12}
c\neq 1
c(g)<g
c(-g) = p-c(g)
 f(a) = \sum_{c(g)<g} c(g) p + \frac{p^2(p-1)}{4} - \frac{(p-1)p(2p-1)}{12} = \sum_{c(g)<g} c(g) p + \frac{(p-1)p(p+1)}{12}
x
p
p\lbrace x/p\rbrace
f(a)
f(a,p)
f(a,p)=\sum_{g=1}^{p-1}gp\lbrace ag/p\rbrace=p\sum_{g=1}^{p-1}g\lbrace ag/p\rbrace
s(h,k)=\sum_{\nu=1}^{k-1}\left({\nu\over k}-{1\over2}\right)\left(\left\lbrace{h\nu\over k}\right\rbrace-{1\over2}\right)
s(h,k)=\sum_{\nu=1}^{k-1}{\nu\over k}\lbrace h\nu/k\rbrace+{\rm\ easy\ stuff}
p^2s(a,p)=p\sum_{\nu=1}^{p-1}\nu\lbrace a\nu/p\rbrace+{\rm\ other\ easy\ stuff}
f(a,p)=p^2s(a,p)+{\rm\ as\ usual}
