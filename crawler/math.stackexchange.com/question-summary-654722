f(x)
 \frac{x}{x^4+x^2+1}=\frac{x(1-x^2)}{1-x^6}=(x-x^3)\sum_{n=0}^\infty x^{6n}. 
x^4+x^2+1=(x^2+1)^2-x^2=(x^2+x+1)(x^2-x+1)
\frac x{x^4+x^2+1}=\frac12\frac{(x^2+x+1)-(x^2-x+1)}{(x^2+x+1)(x^2-x+1)}
=\frac12\left(\frac1{x^2-x+1}-\frac1{x^2+x+1}\right)
\displaystyle 1\pm x^3=(1\pm x)(1\mp x+x^2),
\displaystyle\implies\frac1{1\mp x+x^2}=(1\pm x)\cdot(1\pm x^3)^{-1}
