\text{haversin}
\theta
\text{haversin}\left(\frac dr\right)=\text{haversin}(\phi_2-\phi_1)+\cos(\phi_1)\cos(\phi_2)\text{haversin}(\lambda_2-\lambda_1)
\text{haversin}(\theta)=\sin^2\left(\frac\theta2\right)=\frac{1-\cos(\theta)}2
d
d
\text{haversin}^{-1}(\theta)=2\sin^{-1}(\sqrt \theta)
d=2r\sin^{-1}\left(\sqrt{\text{haversin}(\phi_2-\phi_1)+\cos(\phi_1)\cos(\phi_2)\text{haversin}(\lambda_2-\lambda_1)}\right)
d
d
d
d
