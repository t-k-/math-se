\displaystyle\sum_{k=1}^n a_k=na_n-\displaystyle\sum_{k=1}^{n-1} k(a_{k+1}-a_k)
\displaystyle\sum_{k=1}^n \lfloor \log_2(k) \rfloor=(n+1)\lfloor \log_2(n) \rfloor -2^{\lfloor \log_2(n) \rfloor+1}+2
\displaystyle\sum_{k=1}^n \lfloor \log_2(k) \rfloor=n\lfloor \log_2(n) \rfloor-\displaystyle\sum_{k=1}^{n-1} k(\lfloor \log_2(k+1) \rfloor-\lfloor \log_2(k) \rfloor)
\sum_{k=1}^n\lfloor\lg n\rfloor=n\lfloor\lg k\rfloor-\sum_{k=1}^{n-1}k\Big(\lfloor\lg(k+1)\rfloor-\lfloor\lg k\rfloor\Big)\;,
\lg
\log_2
2^m\le k<k+1<2^{m+1}
\lg k=\lg(k+1)
0
k=2^m-1
m
k
\sum_{k=1}^{n-1}k\Big(\lfloor\lg(k+1)\rfloor-\lfloor\lg k\rfloor\Big)=\sum_{1\le m\le\lg n}\left(2^m-1\right)=\sum_{m=1}^{\lfloor\lg n\rfloor}\left(2^m-1\right)\;.
\sum_{k=1}^{n-1}k(\lfloor \log_2(k+1)\rfloor - \lfloor \log_2(k)\rfloor)
k=2^s-1
s
\lfloor \log_2(n)\rfloor
 \displaystyle\sum_{k=1}^n a_k=na_n-\displaystyle\sum_{k=1}^{n-1} k(a_{k+1}-a_k) \,.
 \sum_{k=m}^n f_k(g_{k+1}-g_k) = \left[f_{n+1}g_{n+1} - f_m g_m\right] - \sum_{k=m}^n g_{k+1}(f_{k+1}- f_k)\,. 
f_k=a_k
g_k=k \Rightarrow g_{k+1}-g_k=1
